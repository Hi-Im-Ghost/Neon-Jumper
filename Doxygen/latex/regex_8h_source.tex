\hypertarget{regex_8h_source}{}\doxysection{regex.\+h}
\label{regex_8h_source}\index{src/rapidjson/include/rapidjson/internal/regex.h@{src/rapidjson/include/rapidjson/internal/regex.h}}
\mbox{\hyperlink{regex_8h}{Go to the documentation of this file.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{1 \textcolor{comment}{// Tencent is pleased to support the open source community by making RapidJSON available.}}
\DoxyCodeLine{2 \textcolor{comment}{// }}
\DoxyCodeLine{3 \textcolor{comment}{// Copyright (C) 2015 THL A29 Limited, a Tencent company, and Milo Yip.}}
\DoxyCodeLine{4 \textcolor{comment}{//}}
\DoxyCodeLine{5 \textcolor{comment}{// Licensed under the MIT License (the "{}License"{}); you may not use this file except}}
\DoxyCodeLine{6 \textcolor{comment}{// in compliance with the License. You may obtain a copy of the License at}}
\DoxyCodeLine{7 \textcolor{comment}{//}}
\DoxyCodeLine{8 \textcolor{comment}{// http://opensource.org/licenses/MIT}}
\DoxyCodeLine{9 \textcolor{comment}{//}}
\DoxyCodeLine{10 \textcolor{comment}{// Unless required by applicable law or agreed to in writing, software distributed }}
\DoxyCodeLine{11 \textcolor{comment}{// under the License is distributed on an "{}AS IS"{} BASIS, WITHOUT WARRANTIES OR }}
\DoxyCodeLine{12 \textcolor{comment}{// CONDITIONS OF ANY KIND, either express or implied. See the License for the }}
\DoxyCodeLine{13 \textcolor{comment}{// specific language governing permissions and limitations under the License.}}
\DoxyCodeLine{14 }
\DoxyCodeLine{15 \textcolor{preprocessor}{\#ifndef RAPIDJSON\_INTERNAL\_REGEX\_H\_}}
\DoxyCodeLine{16 \textcolor{preprocessor}{\#define RAPIDJSON\_INTERNAL\_REGEX\_H\_}}
\DoxyCodeLine{17 }
\DoxyCodeLine{18 \textcolor{preprocessor}{\#include "{}../allocators.h"{}}}
\DoxyCodeLine{19 \textcolor{preprocessor}{\#include "{}../stream.h"{}}}
\DoxyCodeLine{20 \textcolor{preprocessor}{\#include "{}\mbox{\hyperlink{stack_8h}{stack.h}}"{}}}
\DoxyCodeLine{21 }
\DoxyCodeLine{22 \textcolor{preprocessor}{\#ifdef \_\_clang\_\_}}
\DoxyCodeLine{23 RAPIDJSON\_DIAG\_PUSH}
\DoxyCodeLine{24 RAPIDJSON\_DIAG\_OFF(padded)}
\DoxyCodeLine{25 RAPIDJSON\_DIAG\_OFF(\textcolor{keywordflow}{switch}-\/\textcolor{keyword}{enum})}
\DoxyCodeLine{26 \textcolor{preprocessor}{\#elif defined(\_MSC\_VER)}}
\DoxyCodeLine{27 RAPIDJSON\_DIAG\_PUSH}
\DoxyCodeLine{28 RAPIDJSON\_DIAG\_OFF(4512) \textcolor{comment}{// assignment operator could not be generated}}
\DoxyCodeLine{29 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{30 }
\DoxyCodeLine{31 \textcolor{preprocessor}{\#ifdef \_\_GNUC\_\_}}
\DoxyCodeLine{32 RAPIDJSON\_DIAG\_PUSH}
\DoxyCodeLine{33 RAPIDJSON\_DIAG\_OFF(effc++)}
\DoxyCodeLine{34 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{35 }
\DoxyCodeLine{36 \textcolor{preprocessor}{\#ifndef RAPIDJSON\_REGEX\_VERBOSE}}
\DoxyCodeLine{37 \textcolor{preprocessor}{\#define RAPIDJSON\_REGEX\_VERBOSE 0}}
\DoxyCodeLine{38 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{39 }
\DoxyCodeLine{40 \mbox{\hyperlink{group___r_a_p_i_d_j_s_o_n___c_o_n_f_i_g_gad3806c8251fdc7da9618b7e922674ffc}{RAPIDJSON\_NAMESPACE\_BEGIN}}}
\DoxyCodeLine{41 \textcolor{keyword}{namespace }\mbox{\hyperlink{namespaceinternal}{internal}} \{}
\DoxyCodeLine{42 }
\DoxyCodeLine{44 \textcolor{comment}{// DecodedStream}}
\DoxyCodeLine{45 }
\DoxyCodeLine{46 \textcolor{keyword}{template} <\textcolor{keyword}{typename} SourceStream, \textcolor{keyword}{typename} Encoding>}
\DoxyCodeLine{47 \textcolor{keyword}{class }\mbox{\hyperlink{classinternal_1_1_decoded_stream}{DecodedStream}} \{}
\DoxyCodeLine{48 \textcolor{keyword}{public}:}
\DoxyCodeLine{49     \mbox{\hyperlink{classinternal_1_1_decoded_stream_a45cf40c4e515be8aaa8cd020eaa67595}{DecodedStream}}(SourceStream\& ss) : ss\_(ss), codepoint\_() \{ Decode(); \}}
\DoxyCodeLine{50     \textcolor{keywordtype}{unsigned} \mbox{\hyperlink{classinternal_1_1_decoded_stream_ac78f2cbc03ae0d79a0fcfe6d56589d70}{Peek}}() \{ \textcolor{keywordflow}{return} codepoint\_; \}}
\DoxyCodeLine{51     \textcolor{keywordtype}{unsigned} \mbox{\hyperlink{classinternal_1_1_decoded_stream_a62b45969ce169bef1da0600490329857}{Take}}() \{}
\DoxyCodeLine{52         \textcolor{keywordtype}{unsigned} c = codepoint\_;}
\DoxyCodeLine{53         \textcolor{keywordflow}{if} (c) \textcolor{comment}{// No further decoding when '\(\backslash\)0'}}
\DoxyCodeLine{54             Decode();}
\DoxyCodeLine{55         \textcolor{keywordflow}{return} c;}
\DoxyCodeLine{56     \}}
\DoxyCodeLine{57 }
\DoxyCodeLine{58 \textcolor{keyword}{private}:}
\DoxyCodeLine{59     \textcolor{keywordtype}{void} Decode() \{}
\DoxyCodeLine{60         \textcolor{keywordflow}{if} (!Encoding::Decode(ss\_, \&codepoint\_))}
\DoxyCodeLine{61             codepoint\_ = 0;}
\DoxyCodeLine{62     \}}
\DoxyCodeLine{63 }
\DoxyCodeLine{64     SourceStream\& ss\_;}
\DoxyCodeLine{65     \textcolor{keywordtype}{unsigned} codepoint\_;}
\DoxyCodeLine{66 \};}
\DoxyCodeLine{67 }
\DoxyCodeLine{69 \textcolor{comment}{// GenericRegex}}
\DoxyCodeLine{70 }
\DoxyCodeLine{71 \textcolor{keyword}{static} \textcolor{keyword}{const} \mbox{\hyperlink{rapidjson_8h_a5ed6e6e67250fadbd041127e6386dcb5}{SizeType}} kRegexInvalidState = \string~SizeType(0);  }
\DoxyCodeLine{72 \textcolor{keyword}{static} \textcolor{keyword}{const} \mbox{\hyperlink{rapidjson_8h_a5ed6e6e67250fadbd041127e6386dcb5}{SizeType}} kRegexInvalidRange = \string~SizeType(0);}
\DoxyCodeLine{73 }
\DoxyCodeLine{74 \textcolor{keyword}{template} <\textcolor{keyword}{typename} Encoding, \textcolor{keyword}{typename} Allocator>}
\DoxyCodeLine{75 \textcolor{keyword}{class }GenericRegexSearch;}
\DoxyCodeLine{76 }
\DoxyCodeLine{78 }
\DoxyCodeLine{109 \textcolor{keyword}{template} <\textcolor{keyword}{typename} Encoding, \textcolor{keyword}{typename} Allocator = CrtAllocator>}
\DoxyCodeLine{110 \textcolor{keyword}{class }\mbox{\hyperlink{classinternal_1_1_generic_regex}{GenericRegex}} \{}
\DoxyCodeLine{111 \textcolor{keyword}{public}:}
\DoxyCodeLine{112     \textcolor{keyword}{typedef} \mbox{\hyperlink{classrapidjson_1_1_encoding}{Encoding}} \mbox{\hyperlink{classinternal_1_1_generic_regex_a8d0eb2f6a71868b2a8f03382b7836d30}{EncodingType}};}
\DoxyCodeLine{113     \textcolor{keyword}{typedef} \textcolor{keyword}{typename} Encoding::Ch \mbox{\hyperlink{classinternal_1_1_generic_regex_a44e1a86ec27e1c5628a7d91c8c3daace}{Ch}};}
\DoxyCodeLine{114     \textcolor{keyword}{template} <\textcolor{keyword}{typename}, \textcolor{keyword}{typename}> \textcolor{keyword}{friend} \textcolor{keyword}{class }\mbox{\hyperlink{classinternal_1_1_generic_regex_search}{GenericRegexSearch}};}
\DoxyCodeLine{115 }
\DoxyCodeLine{116     \mbox{\hyperlink{classinternal_1_1_generic_regex_a35c3a49bc4545a991ab039858227df0f}{GenericRegex}}(\textcolor{keyword}{const} \mbox{\hyperlink{classinternal_1_1_generic_regex_a44e1a86ec27e1c5628a7d91c8c3daace}{Ch}}* \mbox{\hyperlink{pointer_8h_adb82dfe18535e9a30aa97d275f82bd55}{source}}, \mbox{\hyperlink{classrapidjson_1_1_allocator}{Allocator}}* allocator = 0) : }
\DoxyCodeLine{117         ownAllocator\_(allocator ? 0 : \mbox{\hyperlink{rapidjson_8h_abdc7cd7902748ffe6626d71c59a73c3b}{RAPIDJSON\_NEW}}(\mbox{\hyperlink{classrapidjson_1_1_allocator}{Allocator}})()), allocator\_(allocator ? allocator : ownAllocator\_), }
\DoxyCodeLine{118         states\_(allocator\_, 256), ranges\_(allocator\_, 256), root\_(kRegexInvalidState), stateCount\_(), rangeCount\_(), }
\DoxyCodeLine{119         anchorBegin\_(), anchorEnd\_()}
\DoxyCodeLine{120     \{}
\DoxyCodeLine{121         \mbox{\hyperlink{struct_generic_string_stream}{GenericStringStream<Encoding>}} ss(\mbox{\hyperlink{pointer_8h_adb82dfe18535e9a30aa97d275f82bd55}{source}});}
\DoxyCodeLine{122         \mbox{\hyperlink{classinternal_1_1_decoded_stream}{DecodedStream<GenericStringStream<Encoding>}}, \mbox{\hyperlink{classrapidjson_1_1_encoding}{Encoding}}> ds(ss);}
\DoxyCodeLine{123         Parse(ds);}
\DoxyCodeLine{124     \}}
\DoxyCodeLine{125 }
\DoxyCodeLine{126     \mbox{\hyperlink{classinternal_1_1_generic_regex_a6a4956c0391bccbf8580b2e047d5bc35}{\string~GenericRegex}}()}
\DoxyCodeLine{127     \{}
\DoxyCodeLine{128         \mbox{\hyperlink{rapidjson_8h_a52c941c3fdd646527cdcd42aa846a28a}{RAPIDJSON\_DELETE}}(ownAllocator\_);}
\DoxyCodeLine{129     \}}
\DoxyCodeLine{130 }
\DoxyCodeLine{131     \textcolor{keywordtype}{bool} \mbox{\hyperlink{classinternal_1_1_generic_regex_a34ddb18fa3a2c70203d0fb740443c2a8}{IsValid}}()\textcolor{keyword}{ const }\{}
\DoxyCodeLine{132         \textcolor{keywordflow}{return} root\_ != kRegexInvalidState;}
\DoxyCodeLine{133     \}}
\DoxyCodeLine{134 }
\DoxyCodeLine{135 \textcolor{keyword}{private}:}
\DoxyCodeLine{136     \textcolor{keyword}{enum} Operator \{}
\DoxyCodeLine{137         kZeroOrOne,}
\DoxyCodeLine{138         kZeroOrMore,}
\DoxyCodeLine{139         kOneOrMore,}
\DoxyCodeLine{140         kConcatenation,}
\DoxyCodeLine{141         kAlternation,}
\DoxyCodeLine{142         kLeftParenthesis}
\DoxyCodeLine{143     \};}
\DoxyCodeLine{144 }
\DoxyCodeLine{145     \textcolor{keyword}{static} \textcolor{keyword}{const} \textcolor{keywordtype}{unsigned} kAnyCharacterClass = 0xFFFFFFFF;   }
\DoxyCodeLine{146     \textcolor{keyword}{static} \textcolor{keyword}{const} \textcolor{keywordtype}{unsigned} kRangeCharacterClass = 0xFFFFFFFE;}
\DoxyCodeLine{147     \textcolor{keyword}{static} \textcolor{keyword}{const} \textcolor{keywordtype}{unsigned} kRangeNegationFlag = 0x80000000;}
\DoxyCodeLine{148 }
\DoxyCodeLine{149     \textcolor{keyword}{struct }Range \{}
\DoxyCodeLine{150         \textcolor{keywordtype}{unsigned} start; \textcolor{comment}{// }}
\DoxyCodeLine{151         \textcolor{keywordtype}{unsigned} end;}
\DoxyCodeLine{152         \mbox{\hyperlink{rapidjson_8h_a5ed6e6e67250fadbd041127e6386dcb5}{SizeType}} next;}
\DoxyCodeLine{153     \};}
\DoxyCodeLine{154 }
\DoxyCodeLine{155     \textcolor{keyword}{struct }State \{}
\DoxyCodeLine{156         \mbox{\hyperlink{rapidjson_8h_a5ed6e6e67250fadbd041127e6386dcb5}{SizeType}} out;     }
\DoxyCodeLine{157         \mbox{\hyperlink{rapidjson_8h_a5ed6e6e67250fadbd041127e6386dcb5}{SizeType}} out1;    }
\DoxyCodeLine{158         \mbox{\hyperlink{rapidjson_8h_a5ed6e6e67250fadbd041127e6386dcb5}{SizeType}} rangeStart;}
\DoxyCodeLine{159         \textcolor{keywordtype}{unsigned} codepoint;}
\DoxyCodeLine{160     \};}
\DoxyCodeLine{161 }
\DoxyCodeLine{162     \textcolor{keyword}{struct }Frag \{}
\DoxyCodeLine{163         Frag(\mbox{\hyperlink{rapidjson_8h_a5ed6e6e67250fadbd041127e6386dcb5}{SizeType}} s, \mbox{\hyperlink{rapidjson_8h_a5ed6e6e67250fadbd041127e6386dcb5}{SizeType}} o, \mbox{\hyperlink{rapidjson_8h_a5ed6e6e67250fadbd041127e6386dcb5}{SizeType}} m) : start(s), out(o), minIndex(m) \{\}}
\DoxyCodeLine{164         \mbox{\hyperlink{rapidjson_8h_a5ed6e6e67250fadbd041127e6386dcb5}{SizeType}} start;}
\DoxyCodeLine{165         \mbox{\hyperlink{rapidjson_8h_a5ed6e6e67250fadbd041127e6386dcb5}{SizeType}} out; }
\DoxyCodeLine{166         \mbox{\hyperlink{rapidjson_8h_a5ed6e6e67250fadbd041127e6386dcb5}{SizeType}} minIndex;}
\DoxyCodeLine{167     \};}
\DoxyCodeLine{168 }
\DoxyCodeLine{169     State\& GetState(\mbox{\hyperlink{rapidjson_8h_a5ed6e6e67250fadbd041127e6386dcb5}{SizeType}} index) \{}
\DoxyCodeLine{170         \mbox{\hyperlink{group___r_a_p_i_d_j_s_o_n___c_o_n_f_i_g_gabeba18d612187bad2ac62aed9276d47c}{RAPIDJSON\_ASSERT}}(index < stateCount\_);}
\DoxyCodeLine{171         \textcolor{keywordflow}{return} states\_.template Bottom<State>()[index];}
\DoxyCodeLine{172     \}}
\DoxyCodeLine{173 }
\DoxyCodeLine{174     \textcolor{keyword}{const} State\& GetState(\mbox{\hyperlink{rapidjson_8h_a5ed6e6e67250fadbd041127e6386dcb5}{SizeType}} index)\textcolor{keyword}{ const }\{}
\DoxyCodeLine{175         \mbox{\hyperlink{group___r_a_p_i_d_j_s_o_n___c_o_n_f_i_g_gabeba18d612187bad2ac62aed9276d47c}{RAPIDJSON\_ASSERT}}(index < stateCount\_);}
\DoxyCodeLine{176         \textcolor{keywordflow}{return} states\_.template Bottom<State>()[index];}
\DoxyCodeLine{177     \}}
\DoxyCodeLine{178 }
\DoxyCodeLine{179     Range\& GetRange(\mbox{\hyperlink{rapidjson_8h_a5ed6e6e67250fadbd041127e6386dcb5}{SizeType}} index) \{}
\DoxyCodeLine{180         \mbox{\hyperlink{group___r_a_p_i_d_j_s_o_n___c_o_n_f_i_g_gabeba18d612187bad2ac62aed9276d47c}{RAPIDJSON\_ASSERT}}(index < rangeCount\_);}
\DoxyCodeLine{181         \textcolor{keywordflow}{return} ranges\_.template Bottom<Range>()[index];}
\DoxyCodeLine{182     \}}
\DoxyCodeLine{183 }
\DoxyCodeLine{184     \textcolor{keyword}{const} Range\& GetRange(\mbox{\hyperlink{rapidjson_8h_a5ed6e6e67250fadbd041127e6386dcb5}{SizeType}} index)\textcolor{keyword}{ const }\{}
\DoxyCodeLine{185         \mbox{\hyperlink{group___r_a_p_i_d_j_s_o_n___c_o_n_f_i_g_gabeba18d612187bad2ac62aed9276d47c}{RAPIDJSON\_ASSERT}}(index < rangeCount\_);}
\DoxyCodeLine{186         \textcolor{keywordflow}{return} ranges\_.template Bottom<Range>()[index];}
\DoxyCodeLine{187     \}}
\DoxyCodeLine{188 }
\DoxyCodeLine{189     \textcolor{keyword}{template} <\textcolor{keyword}{typename} InputStream>}
\DoxyCodeLine{190     \textcolor{keywordtype}{void} Parse(DecodedStream<InputStream, Encoding>\& ds) \{}
\DoxyCodeLine{191         Stack<Allocator> operandStack(allocator\_, 256);    \textcolor{comment}{// Frag}}
\DoxyCodeLine{192         Stack<Allocator> operatorStack(allocator\_, 256);   \textcolor{comment}{// Operator}}
\DoxyCodeLine{193         Stack<Allocator> atomCountStack(allocator\_, 256);  \textcolor{comment}{// unsigned (Atom per parenthesis)}}
\DoxyCodeLine{194 }
\DoxyCodeLine{195         *atomCountStack.template Push<unsigned>() = 0;}
\DoxyCodeLine{196 }
\DoxyCodeLine{197         \textcolor{keywordtype}{unsigned} codepoint;}
\DoxyCodeLine{198         \textcolor{keywordflow}{while} (ds.Peek() != 0) \{}
\DoxyCodeLine{199             \textcolor{keywordflow}{switch} (codepoint = ds.Take()) \{}
\DoxyCodeLine{200                 \textcolor{keywordflow}{case} \textcolor{charliteral}{'\string^'}:}
\DoxyCodeLine{201                     anchorBegin\_ = \textcolor{keyword}{true};}
\DoxyCodeLine{202                     \textcolor{keywordflow}{break};}
\DoxyCodeLine{203 }
\DoxyCodeLine{204                 \textcolor{keywordflow}{case} \textcolor{charliteral}{'\$'}:}
\DoxyCodeLine{205                     anchorEnd\_ = \textcolor{keyword}{true};}
\DoxyCodeLine{206                     \textcolor{keywordflow}{break};}
\DoxyCodeLine{207 }
\DoxyCodeLine{208                 \textcolor{keywordflow}{case} \textcolor{charliteral}{'|'}:}
\DoxyCodeLine{209                     \textcolor{keywordflow}{while} (!operatorStack.Empty() \&\& *operatorStack.template Top<Operator>() < kAlternation)}
\DoxyCodeLine{210                         \textcolor{keywordflow}{if} (!Eval(operandStack, *operatorStack.template Pop<Operator>(1)))}
\DoxyCodeLine{211                             \textcolor{keywordflow}{return};}
\DoxyCodeLine{212                     *operatorStack.template Push<Operator>() = kAlternation;}
\DoxyCodeLine{213                     *atomCountStack.template Top<unsigned>() = 0;}
\DoxyCodeLine{214                     \textcolor{keywordflow}{break};}
\DoxyCodeLine{215 }
\DoxyCodeLine{216                 \textcolor{keywordflow}{case} \textcolor{charliteral}{'('}:}
\DoxyCodeLine{217                     *operatorStack.template Push<Operator>() = kLeftParenthesis;}
\DoxyCodeLine{218                     *atomCountStack.template Push<unsigned>() = 0;}
\DoxyCodeLine{219                     \textcolor{keywordflow}{break};}
\DoxyCodeLine{220 }
\DoxyCodeLine{221                 \textcolor{keywordflow}{case} \textcolor{charliteral}{')'}:}
\DoxyCodeLine{222                     \textcolor{keywordflow}{while} (!operatorStack.Empty() \&\& *operatorStack.template Top<Operator>() != kLeftParenthesis)}
\DoxyCodeLine{223                         \textcolor{keywordflow}{if} (!Eval(operandStack, *operatorStack.template Pop<Operator>(1)))}
\DoxyCodeLine{224                             \textcolor{keywordflow}{return};}
\DoxyCodeLine{225                     \textcolor{keywordflow}{if} (operatorStack.Empty())}
\DoxyCodeLine{226                         \textcolor{keywordflow}{return};}
\DoxyCodeLine{227                     operatorStack.template Pop<Operator>(1);}
\DoxyCodeLine{228                     atomCountStack.template Pop<unsigned>(1);}
\DoxyCodeLine{229                     ImplicitConcatenation(atomCountStack, operatorStack);}
\DoxyCodeLine{230                     \textcolor{keywordflow}{break};}
\DoxyCodeLine{231 }
\DoxyCodeLine{232                 \textcolor{keywordflow}{case} \textcolor{charliteral}{'?'}:}
\DoxyCodeLine{233                     \textcolor{keywordflow}{if} (!Eval(operandStack, kZeroOrOne))}
\DoxyCodeLine{234                         \textcolor{keywordflow}{return};}
\DoxyCodeLine{235                     \textcolor{keywordflow}{break};}
\DoxyCodeLine{236 }
\DoxyCodeLine{237                 \textcolor{keywordflow}{case} \textcolor{charliteral}{'*'}:}
\DoxyCodeLine{238                     \textcolor{keywordflow}{if} (!Eval(operandStack, kZeroOrMore))}
\DoxyCodeLine{239                         \textcolor{keywordflow}{return};}
\DoxyCodeLine{240                     \textcolor{keywordflow}{break};}
\DoxyCodeLine{241 }
\DoxyCodeLine{242                 \textcolor{keywordflow}{case} \textcolor{charliteral}{'+'}:}
\DoxyCodeLine{243                     \textcolor{keywordflow}{if} (!Eval(operandStack, kOneOrMore))}
\DoxyCodeLine{244                         \textcolor{keywordflow}{return};}
\DoxyCodeLine{245                     \textcolor{keywordflow}{break};}
\DoxyCodeLine{246 }
\DoxyCodeLine{247                 \textcolor{keywordflow}{case} \textcolor{charliteral}{'\{'}:}
\DoxyCodeLine{248                     \{}
\DoxyCodeLine{249                         \textcolor{keywordtype}{unsigned} n, m;}
\DoxyCodeLine{250                         \textcolor{keywordflow}{if} (!ParseUnsigned(ds, \&n))}
\DoxyCodeLine{251                             \textcolor{keywordflow}{return};}
\DoxyCodeLine{252 }
\DoxyCodeLine{253                         \textcolor{keywordflow}{if} (ds.Peek() == \textcolor{charliteral}{','}) \{}
\DoxyCodeLine{254                             ds.Take();}
\DoxyCodeLine{255                             \textcolor{keywordflow}{if} (ds.Peek() == \textcolor{charliteral}{'\}'})}
\DoxyCodeLine{256                                 m = kInfinityQuantifier;}
\DoxyCodeLine{257                             \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (!ParseUnsigned(ds, \&m) || m < n)}
\DoxyCodeLine{258                                 \textcolor{keywordflow}{return};}
\DoxyCodeLine{259                         \}}
\DoxyCodeLine{260                         \textcolor{keywordflow}{else}}
\DoxyCodeLine{261                             m = n;}
\DoxyCodeLine{262 }
\DoxyCodeLine{263                         \textcolor{keywordflow}{if} (!EvalQuantifier(operandStack, n, m) || ds.Peek() != \textcolor{charliteral}{'\}'})}
\DoxyCodeLine{264                             \textcolor{keywordflow}{return};}
\DoxyCodeLine{265                         ds.Take();}
\DoxyCodeLine{266                     \}}
\DoxyCodeLine{267                     \textcolor{keywordflow}{break};}
\DoxyCodeLine{268 }
\DoxyCodeLine{269                 \textcolor{keywordflow}{case} \textcolor{charliteral}{'.'}:}
\DoxyCodeLine{270                     PushOperand(operandStack, kAnyCharacterClass);}
\DoxyCodeLine{271                     ImplicitConcatenation(atomCountStack, operatorStack);}
\DoxyCodeLine{272                     \textcolor{keywordflow}{break};}
\DoxyCodeLine{273 }
\DoxyCodeLine{274                 \textcolor{keywordflow}{case} \textcolor{charliteral}{'['}:}
\DoxyCodeLine{275                     \{}
\DoxyCodeLine{276                         \mbox{\hyperlink{rapidjson_8h_a5ed6e6e67250fadbd041127e6386dcb5}{SizeType}} range;}
\DoxyCodeLine{277                         \textcolor{keywordflow}{if} (!ParseRange(ds, \&range))}
\DoxyCodeLine{278                             \textcolor{keywordflow}{return};}
\DoxyCodeLine{279                         \mbox{\hyperlink{rapidjson_8h_a5ed6e6e67250fadbd041127e6386dcb5}{SizeType}} s = NewState(kRegexInvalidState, kRegexInvalidState, kRangeCharacterClass);}
\DoxyCodeLine{280                         GetState(s).rangeStart = range;}
\DoxyCodeLine{281                         *operandStack.template Push<Frag>() = Frag(s, s, s);}
\DoxyCodeLine{282                     \}}
\DoxyCodeLine{283                     ImplicitConcatenation(atomCountStack, operatorStack);}
\DoxyCodeLine{284                     \textcolor{keywordflow}{break};}
\DoxyCodeLine{285 }
\DoxyCodeLine{286                 \textcolor{keywordflow}{case} \textcolor{charliteral}{'\(\backslash\)\(\backslash\)'}: \textcolor{comment}{// Escape character}}
\DoxyCodeLine{287                     \textcolor{keywordflow}{if} (!CharacterEscape(ds, \&codepoint))}
\DoxyCodeLine{288                         \textcolor{keywordflow}{return}; \textcolor{comment}{// Unsupported escape character}}
\DoxyCodeLine{289                     \textcolor{comment}{// fall through to default}}
\DoxyCodeLine{290                     RAPIDJSON\_DELIBERATE\_FALLTHROUGH;}
\DoxyCodeLine{291 }
\DoxyCodeLine{292                 \textcolor{keywordflow}{default}: \textcolor{comment}{// Pattern character}}
\DoxyCodeLine{293                     PushOperand(operandStack, codepoint);}
\DoxyCodeLine{294                     ImplicitConcatenation(atomCountStack, operatorStack);}
\DoxyCodeLine{295             \}}
\DoxyCodeLine{296         \}}
\DoxyCodeLine{297 }
\DoxyCodeLine{298         \textcolor{keywordflow}{while} (!operatorStack.Empty())}
\DoxyCodeLine{299             \textcolor{keywordflow}{if} (!Eval(operandStack, *operatorStack.template Pop<Operator>(1)))}
\DoxyCodeLine{300                 \textcolor{keywordflow}{return};}
\DoxyCodeLine{301 }
\DoxyCodeLine{302         \textcolor{comment}{// Link the operand to matching state.}}
\DoxyCodeLine{303         \textcolor{keywordflow}{if} (operandStack.GetSize() == \textcolor{keyword}{sizeof}(Frag)) \{}
\DoxyCodeLine{304             Frag* e = operandStack.template Pop<Frag>(1);}
\DoxyCodeLine{305             Patch(e-\/>out, NewState(kRegexInvalidState, kRegexInvalidState, 0));}
\DoxyCodeLine{306             root\_ = e-\/>start;}
\DoxyCodeLine{307 }
\DoxyCodeLine{308 \textcolor{preprocessor}{\#if RAPIDJSON\_REGEX\_VERBOSE}}
\DoxyCodeLine{309             printf(\textcolor{stringliteral}{"{}root: \%d\(\backslash\)n"{}}, root\_);}
\DoxyCodeLine{310             \textcolor{keywordflow}{for} (\mbox{\hyperlink{rapidjson_8h_a5ed6e6e67250fadbd041127e6386dcb5}{SizeType}} i = 0; i < stateCount\_ ; i++) \{}
\DoxyCodeLine{311                 State\& s = GetState(i);}
\DoxyCodeLine{312                 printf(\textcolor{stringliteral}{"{}[\%2d] out: \%2d out1: \%2d c: '\%c'\(\backslash\)n"{}}, i, s.out, s.out1, (\textcolor{keywordtype}{char})s.codepoint);}
\DoxyCodeLine{313             \}}
\DoxyCodeLine{314             printf(\textcolor{stringliteral}{"{}\(\backslash\)n"{}});}
\DoxyCodeLine{315 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{316         \}}
\DoxyCodeLine{317     \}}
\DoxyCodeLine{318 }
\DoxyCodeLine{319     \mbox{\hyperlink{rapidjson_8h_a5ed6e6e67250fadbd041127e6386dcb5}{SizeType}} NewState(\mbox{\hyperlink{rapidjson_8h_a5ed6e6e67250fadbd041127e6386dcb5}{SizeType}} out, \mbox{\hyperlink{rapidjson_8h_a5ed6e6e67250fadbd041127e6386dcb5}{SizeType}} out1, \textcolor{keywordtype}{unsigned} codepoint) \{}
\DoxyCodeLine{320         State* s = states\_.template Push<State>();}
\DoxyCodeLine{321         s-\/>out = out;}
\DoxyCodeLine{322         s-\/>out1 = out1;}
\DoxyCodeLine{323         s-\/>codepoint = codepoint;}
\DoxyCodeLine{324         s-\/>rangeStart = kRegexInvalidRange;}
\DoxyCodeLine{325         \textcolor{keywordflow}{return} stateCount\_++;}
\DoxyCodeLine{326     \}}
\DoxyCodeLine{327 }
\DoxyCodeLine{328     \textcolor{keywordtype}{void} PushOperand(Stack<Allocator>\& operandStack, \textcolor{keywordtype}{unsigned} codepoint) \{}
\DoxyCodeLine{329         \mbox{\hyperlink{rapidjson_8h_a5ed6e6e67250fadbd041127e6386dcb5}{SizeType}} s = NewState(kRegexInvalidState, kRegexInvalidState, codepoint);}
\DoxyCodeLine{330         *operandStack.template Push<Frag>() = Frag(s, s, s);}
\DoxyCodeLine{331     \}}
\DoxyCodeLine{332 }
\DoxyCodeLine{333     \textcolor{keywordtype}{void} ImplicitConcatenation(Stack<Allocator>\& atomCountStack, Stack<Allocator>\& operatorStack) \{}
\DoxyCodeLine{334         \textcolor{keywordflow}{if} (*atomCountStack.template Top<unsigned>())}
\DoxyCodeLine{335             *operatorStack.template Push<Operator>() = kConcatenation;}
\DoxyCodeLine{336         (*atomCountStack.template Top<unsigned>())++;}
\DoxyCodeLine{337     \}}
\DoxyCodeLine{338 }
\DoxyCodeLine{339     \mbox{\hyperlink{rapidjson_8h_a5ed6e6e67250fadbd041127e6386dcb5}{SizeType}} Append(\mbox{\hyperlink{rapidjson_8h_a5ed6e6e67250fadbd041127e6386dcb5}{SizeType}} l1, \mbox{\hyperlink{rapidjson_8h_a5ed6e6e67250fadbd041127e6386dcb5}{SizeType}} l2) \{}
\DoxyCodeLine{340         \mbox{\hyperlink{rapidjson_8h_a5ed6e6e67250fadbd041127e6386dcb5}{SizeType}} old = l1;}
\DoxyCodeLine{341         \textcolor{keywordflow}{while} (GetState(l1).out != kRegexInvalidState)}
\DoxyCodeLine{342             l1 = GetState(l1).out;}
\DoxyCodeLine{343         GetState(l1).out = l2;}
\DoxyCodeLine{344         \textcolor{keywordflow}{return} old;}
\DoxyCodeLine{345     \}}
\DoxyCodeLine{346 }
\DoxyCodeLine{347     \textcolor{keywordtype}{void} Patch(\mbox{\hyperlink{rapidjson_8h_a5ed6e6e67250fadbd041127e6386dcb5}{SizeType}} l, \mbox{\hyperlink{rapidjson_8h_a5ed6e6e67250fadbd041127e6386dcb5}{SizeType}} s) \{}
\DoxyCodeLine{348         \textcolor{keywordflow}{for} (\mbox{\hyperlink{rapidjson_8h_a5ed6e6e67250fadbd041127e6386dcb5}{SizeType}} next; l != kRegexInvalidState; l = next) \{}
\DoxyCodeLine{349             next = GetState(l).out;}
\DoxyCodeLine{350             GetState(l).out = s;}
\DoxyCodeLine{351         \}}
\DoxyCodeLine{352     \}}
\DoxyCodeLine{353 }
\DoxyCodeLine{354     \textcolor{keywordtype}{bool} Eval(Stack<Allocator>\& operandStack, Operator op) \{}
\DoxyCodeLine{355         \textcolor{keywordflow}{switch} (op) \{}
\DoxyCodeLine{356             \textcolor{keywordflow}{case} kConcatenation:}
\DoxyCodeLine{357                 \mbox{\hyperlink{group___r_a_p_i_d_j_s_o_n___c_o_n_f_i_g_gabeba18d612187bad2ac62aed9276d47c}{RAPIDJSON\_ASSERT}}(operandStack.GetSize() >= \textcolor{keyword}{sizeof}(Frag) * 2);}
\DoxyCodeLine{358                 \{}
\DoxyCodeLine{359                     Frag e2 = *operandStack.template Pop<Frag>(1);}
\DoxyCodeLine{360                     Frag e1 = *operandStack.template Pop<Frag>(1);}
\DoxyCodeLine{361                     Patch(e1.out, e2.start);}
\DoxyCodeLine{362                     *operandStack.template Push<Frag>() = Frag(e1.start, e2.out, Min(e1.minIndex, e2.minIndex));}
\DoxyCodeLine{363                 \}}
\DoxyCodeLine{364                 \textcolor{keywordflow}{return} \textcolor{keyword}{true};}
\DoxyCodeLine{365 }
\DoxyCodeLine{366             \textcolor{keywordflow}{case} kAlternation:}
\DoxyCodeLine{367                 \textcolor{keywordflow}{if} (operandStack.GetSize() >= \textcolor{keyword}{sizeof}(Frag) * 2) \{}
\DoxyCodeLine{368                     Frag e2 = *operandStack.template Pop<Frag>(1);}
\DoxyCodeLine{369                     Frag e1 = *operandStack.template Pop<Frag>(1);}
\DoxyCodeLine{370                     \mbox{\hyperlink{rapidjson_8h_a5ed6e6e67250fadbd041127e6386dcb5}{SizeType}} s = NewState(e1.start, e2.start, 0);}
\DoxyCodeLine{371                     *operandStack.template Push<Frag>() = Frag(s, Append(e1.out, e2.out), Min(e1.minIndex, e2.minIndex));}
\DoxyCodeLine{372                     \textcolor{keywordflow}{return} \textcolor{keyword}{true};}
\DoxyCodeLine{373                 \}}
\DoxyCodeLine{374                 \textcolor{keywordflow}{return} \textcolor{keyword}{false};}
\DoxyCodeLine{375 }
\DoxyCodeLine{376             \textcolor{keywordflow}{case} kZeroOrOne:}
\DoxyCodeLine{377                 \textcolor{keywordflow}{if} (operandStack.GetSize() >= \textcolor{keyword}{sizeof}(Frag)) \{}
\DoxyCodeLine{378                     Frag e = *operandStack.template Pop<Frag>(1);}
\DoxyCodeLine{379                     \mbox{\hyperlink{rapidjson_8h_a5ed6e6e67250fadbd041127e6386dcb5}{SizeType}} s = NewState(kRegexInvalidState, e.start, 0);}
\DoxyCodeLine{380                     *operandStack.template Push<Frag>() = Frag(s, Append(e.out, s), e.minIndex);}
\DoxyCodeLine{381                     \textcolor{keywordflow}{return} \textcolor{keyword}{true};}
\DoxyCodeLine{382                 \}}
\DoxyCodeLine{383                 \textcolor{keywordflow}{return} \textcolor{keyword}{false};}
\DoxyCodeLine{384 }
\DoxyCodeLine{385             \textcolor{keywordflow}{case} kZeroOrMore:}
\DoxyCodeLine{386                 \textcolor{keywordflow}{if} (operandStack.GetSize() >= \textcolor{keyword}{sizeof}(Frag)) \{}
\DoxyCodeLine{387                     Frag e = *operandStack.template Pop<Frag>(1);}
\DoxyCodeLine{388                     \mbox{\hyperlink{rapidjson_8h_a5ed6e6e67250fadbd041127e6386dcb5}{SizeType}} s = NewState(kRegexInvalidState, e.start, 0);}
\DoxyCodeLine{389                     Patch(e.out, s);}
\DoxyCodeLine{390                     *operandStack.template Push<Frag>() = Frag(s, s, e.minIndex);}
\DoxyCodeLine{391                     \textcolor{keywordflow}{return} \textcolor{keyword}{true};}
\DoxyCodeLine{392                 \}}
\DoxyCodeLine{393                 \textcolor{keywordflow}{return} \textcolor{keyword}{false};}
\DoxyCodeLine{394 }
\DoxyCodeLine{395             \textcolor{keywordflow}{case} kOneOrMore:}
\DoxyCodeLine{396                 \textcolor{keywordflow}{if} (operandStack.GetSize() >= \textcolor{keyword}{sizeof}(Frag)) \{}
\DoxyCodeLine{397                     Frag e = *operandStack.template Pop<Frag>(1);}
\DoxyCodeLine{398                     \mbox{\hyperlink{rapidjson_8h_a5ed6e6e67250fadbd041127e6386dcb5}{SizeType}} s = NewState(kRegexInvalidState, e.start, 0);}
\DoxyCodeLine{399                     Patch(e.out, s);}
\DoxyCodeLine{400                     *operandStack.template Push<Frag>() = Frag(e.start, s, e.minIndex);}
\DoxyCodeLine{401                     \textcolor{keywordflow}{return} \textcolor{keyword}{true};}
\DoxyCodeLine{402                 \}}
\DoxyCodeLine{403                 \textcolor{keywordflow}{return} \textcolor{keyword}{false};}
\DoxyCodeLine{404 }
\DoxyCodeLine{405             \textcolor{keywordflow}{default}: }
\DoxyCodeLine{406                 \textcolor{comment}{// syntax error (e.g. unclosed kLeftParenthesis)}}
\DoxyCodeLine{407                 \textcolor{keywordflow}{return} \textcolor{keyword}{false};}
\DoxyCodeLine{408         \}}
\DoxyCodeLine{409     \}}
\DoxyCodeLine{410 }
\DoxyCodeLine{411     \textcolor{keywordtype}{bool} EvalQuantifier(Stack<Allocator>\& operandStack, \textcolor{keywordtype}{unsigned} n, \textcolor{keywordtype}{unsigned} m) \{}
\DoxyCodeLine{412         \mbox{\hyperlink{group___r_a_p_i_d_j_s_o_n___c_o_n_f_i_g_gabeba18d612187bad2ac62aed9276d47c}{RAPIDJSON\_ASSERT}}(n <= m);}
\DoxyCodeLine{413         \mbox{\hyperlink{group___r_a_p_i_d_j_s_o_n___c_o_n_f_i_g_gabeba18d612187bad2ac62aed9276d47c}{RAPIDJSON\_ASSERT}}(operandStack.GetSize() >= \textcolor{keyword}{sizeof}(Frag));}
\DoxyCodeLine{414 }
\DoxyCodeLine{415         \textcolor{keywordflow}{if} (n == 0) \{}
\DoxyCodeLine{416             \textcolor{keywordflow}{if} (m == 0)                             \textcolor{comment}{// a\{0\} not support}}
\DoxyCodeLine{417                 \textcolor{keywordflow}{return} \textcolor{keyword}{false};}
\DoxyCodeLine{418             \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (m == kInfinityQuantifier)}
\DoxyCodeLine{419                 Eval(operandStack, kZeroOrMore);    \textcolor{comment}{// a\{0,\} -\/> a*}}
\DoxyCodeLine{420             \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{421                 Eval(operandStack, kZeroOrOne);         \textcolor{comment}{// a\{0,5\} -\/> a?}}
\DoxyCodeLine{422                 \textcolor{keywordflow}{for} (\textcolor{keywordtype}{unsigned} i = 0; i < m -\/ 1; i++)}
\DoxyCodeLine{423                     CloneTopOperand(operandStack);      \textcolor{comment}{// a\{0,5\} -\/> a? a? a? a? a?}}
\DoxyCodeLine{424                 \textcolor{keywordflow}{for} (\textcolor{keywordtype}{unsigned} i = 0; i < m -\/ 1; i++)}
\DoxyCodeLine{425                     Eval(operandStack, kConcatenation); \textcolor{comment}{// a\{0,5\} -\/> a?a?a?a?a?}}
\DoxyCodeLine{426             \}}
\DoxyCodeLine{427             \textcolor{keywordflow}{return} \textcolor{keyword}{true};}
\DoxyCodeLine{428         \}}
\DoxyCodeLine{429 }
\DoxyCodeLine{430         \textcolor{keywordflow}{for} (\textcolor{keywordtype}{unsigned} i = 0; i < n -\/ 1; i++)        \textcolor{comment}{// a\{3\} -\/> a a a}}
\DoxyCodeLine{431             CloneTopOperand(operandStack);}
\DoxyCodeLine{432 }
\DoxyCodeLine{433         \textcolor{keywordflow}{if} (m == kInfinityQuantifier)}
\DoxyCodeLine{434             Eval(operandStack, kOneOrMore);         \textcolor{comment}{// a\{3,\} -\/> a a a+}}
\DoxyCodeLine{435         \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (m > n) \{}
\DoxyCodeLine{436             CloneTopOperand(operandStack);          \textcolor{comment}{// a\{3,5\} -\/> a a a a}}
\DoxyCodeLine{437             Eval(operandStack, kZeroOrOne);         \textcolor{comment}{// a\{3,5\} -\/> a a a a?}}
\DoxyCodeLine{438             \textcolor{keywordflow}{for} (\textcolor{keywordtype}{unsigned} i = n; i < m -\/ 1; i++)}
\DoxyCodeLine{439                 CloneTopOperand(operandStack);      \textcolor{comment}{// a\{3,5\} -\/> a a a a? a?}}
\DoxyCodeLine{440             \textcolor{keywordflow}{for} (\textcolor{keywordtype}{unsigned} i = n; i < m; i++)}
\DoxyCodeLine{441                 Eval(operandStack, kConcatenation); \textcolor{comment}{// a\{3,5\} -\/> a a aa?a?}}
\DoxyCodeLine{442         \}}
\DoxyCodeLine{443 }
\DoxyCodeLine{444         \textcolor{keywordflow}{for} (\textcolor{keywordtype}{unsigned} i = 0; i < n -\/ 1; i++)}
\DoxyCodeLine{445             Eval(operandStack, kConcatenation);     \textcolor{comment}{// a\{3\} -\/> aaa, a\{3,\} -\/> aaa+, a\{3.5\} -\/> aaaa?a?}}
\DoxyCodeLine{446 }
\DoxyCodeLine{447         \textcolor{keywordflow}{return} \textcolor{keyword}{true};}
\DoxyCodeLine{448     \}}
\DoxyCodeLine{449 }
\DoxyCodeLine{450     \textcolor{keyword}{static} \mbox{\hyperlink{rapidjson_8h_a5ed6e6e67250fadbd041127e6386dcb5}{SizeType}} Min(\mbox{\hyperlink{rapidjson_8h_a5ed6e6e67250fadbd041127e6386dcb5}{SizeType}} \mbox{\hyperlink{pointer_8h_aeeddce917cf130d62c370b8f216026dd}{a}}, \mbox{\hyperlink{rapidjson_8h_a5ed6e6e67250fadbd041127e6386dcb5}{SizeType}} b) \{ \textcolor{keywordflow}{return} \mbox{\hyperlink{pointer_8h_aeeddce917cf130d62c370b8f216026dd}{a}} < b ? \mbox{\hyperlink{pointer_8h_aeeddce917cf130d62c370b8f216026dd}{a}} : b; \}}
\DoxyCodeLine{451 }
\DoxyCodeLine{452     \textcolor{keywordtype}{void} CloneTopOperand(Stack<Allocator>\& operandStack) \{}
\DoxyCodeLine{453         \textcolor{keyword}{const} Frag src = *operandStack.template Top<Frag>(); \textcolor{comment}{// Copy constructor to prevent invalidation}}
\DoxyCodeLine{454         \mbox{\hyperlink{rapidjson_8h_a5ed6e6e67250fadbd041127e6386dcb5}{SizeType}} count = stateCount\_ -\/ src.minIndex; \textcolor{comment}{// Assumes top operand contains states in [src-\/>minIndex, stateCount\_)}}
\DoxyCodeLine{455         State* s = states\_.template Push<State>(count);}
\DoxyCodeLine{456         memcpy(s, \&GetState(src.minIndex), count * \textcolor{keyword}{sizeof}(State));}
\DoxyCodeLine{457         \textcolor{keywordflow}{for} (\mbox{\hyperlink{rapidjson_8h_a5ed6e6e67250fadbd041127e6386dcb5}{SizeType}} j = 0; j < count; j++) \{}
\DoxyCodeLine{458             \textcolor{keywordflow}{if} (s[j].out != kRegexInvalidState)}
\DoxyCodeLine{459                 s[j].out += count;}
\DoxyCodeLine{460             \textcolor{keywordflow}{if} (s[j].out1 != kRegexInvalidState)}
\DoxyCodeLine{461                 s[j].out1 += count;}
\DoxyCodeLine{462         \}}
\DoxyCodeLine{463         *operandStack.template Push<Frag>() = Frag(src.start + count, src.out + count, src.minIndex + count);}
\DoxyCodeLine{464         stateCount\_ += count;}
\DoxyCodeLine{465     \}}
\DoxyCodeLine{466 }
\DoxyCodeLine{467     \textcolor{keyword}{template} <\textcolor{keyword}{typename} InputStream>}
\DoxyCodeLine{468     \textcolor{keywordtype}{bool} ParseUnsigned(DecodedStream<InputStream, Encoding>\& ds, \textcolor{keywordtype}{unsigned}* u) \{}
\DoxyCodeLine{469         \textcolor{keywordtype}{unsigned} r = 0;}
\DoxyCodeLine{470         \textcolor{keywordflow}{if} (ds.Peek() < \textcolor{charliteral}{'0'} || ds.Peek() > \textcolor{charliteral}{'9'})}
\DoxyCodeLine{471             \textcolor{keywordflow}{return} \textcolor{keyword}{false};}
\DoxyCodeLine{472         \textcolor{keywordflow}{while} (ds.Peek() >= \textcolor{charliteral}{'0'} \&\& ds.Peek() <= \textcolor{charliteral}{'9'}) \{}
\DoxyCodeLine{473             \textcolor{keywordflow}{if} (r >= 429496729 \&\& ds.Peek() > \textcolor{charliteral}{'5'}) \textcolor{comment}{// 2\string^32 -\/ 1 = 4294967295}}
\DoxyCodeLine{474                 \textcolor{keywordflow}{return} \textcolor{keyword}{false}; \textcolor{comment}{// overflow}}
\DoxyCodeLine{475             r = r * 10 + (ds.Take() -\/ \textcolor{charliteral}{'0'});}
\DoxyCodeLine{476         \}}
\DoxyCodeLine{477         *u = r;}
\DoxyCodeLine{478         \textcolor{keywordflow}{return} \textcolor{keyword}{true};}
\DoxyCodeLine{479     \}}
\DoxyCodeLine{480 }
\DoxyCodeLine{481     \textcolor{keyword}{template} <\textcolor{keyword}{typename} InputStream>}
\DoxyCodeLine{482     \textcolor{keywordtype}{bool} ParseRange(DecodedStream<InputStream, Encoding>\& ds, \mbox{\hyperlink{rapidjson_8h_a5ed6e6e67250fadbd041127e6386dcb5}{SizeType}}* range) \{}
\DoxyCodeLine{483         \textcolor{keywordtype}{bool} isBegin = \textcolor{keyword}{true};}
\DoxyCodeLine{484         \textcolor{keywordtype}{bool} negate = \textcolor{keyword}{false};}
\DoxyCodeLine{485         \textcolor{keywordtype}{int} step = 0;}
\DoxyCodeLine{486         \mbox{\hyperlink{rapidjson_8h_a5ed6e6e67250fadbd041127e6386dcb5}{SizeType}} start = kRegexInvalidRange;}
\DoxyCodeLine{487         \mbox{\hyperlink{rapidjson_8h_a5ed6e6e67250fadbd041127e6386dcb5}{SizeType}} current = kRegexInvalidRange;}
\DoxyCodeLine{488         \textcolor{keywordtype}{unsigned} codepoint;}
\DoxyCodeLine{489         \textcolor{keywordflow}{while} ((codepoint = ds.Take()) != 0) \{}
\DoxyCodeLine{490             \textcolor{keywordflow}{if} (isBegin) \{}
\DoxyCodeLine{491                 isBegin = \textcolor{keyword}{false};}
\DoxyCodeLine{492                 \textcolor{keywordflow}{if} (codepoint == \textcolor{charliteral}{'\string^'}) \{}
\DoxyCodeLine{493                     negate = \textcolor{keyword}{true};}
\DoxyCodeLine{494                     \textcolor{keywordflow}{continue};}
\DoxyCodeLine{495                 \}}
\DoxyCodeLine{496             \}}
\DoxyCodeLine{497 }
\DoxyCodeLine{498             \textcolor{keywordflow}{switch} (codepoint) \{}
\DoxyCodeLine{499             \textcolor{keywordflow}{case} \textcolor{charliteral}{']'}:}
\DoxyCodeLine{500                 \textcolor{keywordflow}{if} (start == kRegexInvalidRange)}
\DoxyCodeLine{501                     \textcolor{keywordflow}{return} \textcolor{keyword}{false};   \textcolor{comment}{// Error: nothing inside []}}
\DoxyCodeLine{502                 \textcolor{keywordflow}{if} (step == 2) \{ \textcolor{comment}{// Add trailing '-\/'}}
\DoxyCodeLine{503                     \mbox{\hyperlink{rapidjson_8h_a5ed6e6e67250fadbd041127e6386dcb5}{SizeType}} r = NewRange(\textcolor{charliteral}{'-\/'});}
\DoxyCodeLine{504                     \mbox{\hyperlink{group___r_a_p_i_d_j_s_o_n___c_o_n_f_i_g_gabeba18d612187bad2ac62aed9276d47c}{RAPIDJSON\_ASSERT}}(current != kRegexInvalidRange);}
\DoxyCodeLine{505                     GetRange(current).next = r;}
\DoxyCodeLine{506                 \}}
\DoxyCodeLine{507                 \textcolor{keywordflow}{if} (negate)}
\DoxyCodeLine{508                     GetRange(start).start |= kRangeNegationFlag;}
\DoxyCodeLine{509                 *range = start;}
\DoxyCodeLine{510                 \textcolor{keywordflow}{return} \textcolor{keyword}{true};}
\DoxyCodeLine{511 }
\DoxyCodeLine{512             \textcolor{keywordflow}{case} \textcolor{charliteral}{'\(\backslash\)\(\backslash\)'}:}
\DoxyCodeLine{513                 \textcolor{keywordflow}{if} (ds.Peek() == \textcolor{charliteral}{'b'}) \{}
\DoxyCodeLine{514                     ds.Take();}
\DoxyCodeLine{515                     codepoint = 0x0008; \textcolor{comment}{// Escape backspace character}}
\DoxyCodeLine{516                 \}}
\DoxyCodeLine{517                 \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (!CharacterEscape(ds, \&codepoint))}
\DoxyCodeLine{518                     \textcolor{keywordflow}{return} \textcolor{keyword}{false};}
\DoxyCodeLine{519                 \textcolor{comment}{// fall through to default}}
\DoxyCodeLine{520                 RAPIDJSON\_DELIBERATE\_FALLTHROUGH;}
\DoxyCodeLine{521 }
\DoxyCodeLine{522             \textcolor{keywordflow}{default}:}
\DoxyCodeLine{523                 \textcolor{keywordflow}{switch} (step) \{}
\DoxyCodeLine{524                 \textcolor{keywordflow}{case} 1:}
\DoxyCodeLine{525                     \textcolor{keywordflow}{if} (codepoint == \textcolor{charliteral}{'-\/'}) \{}
\DoxyCodeLine{526                         step++;}
\DoxyCodeLine{527                         \textcolor{keywordflow}{break};}
\DoxyCodeLine{528                     \}}
\DoxyCodeLine{529                     \textcolor{comment}{// fall through to step 0 for other characters}}
\DoxyCodeLine{530                     RAPIDJSON\_DELIBERATE\_FALLTHROUGH;}
\DoxyCodeLine{531 }
\DoxyCodeLine{532                 \textcolor{keywordflow}{case} 0:}
\DoxyCodeLine{533                     \{}
\DoxyCodeLine{534                         \mbox{\hyperlink{rapidjson_8h_a5ed6e6e67250fadbd041127e6386dcb5}{SizeType}} r = NewRange(codepoint);}
\DoxyCodeLine{535                         \textcolor{keywordflow}{if} (current != kRegexInvalidRange)}
\DoxyCodeLine{536                             GetRange(current).next = r;}
\DoxyCodeLine{537                         \textcolor{keywordflow}{if} (start == kRegexInvalidRange)}
\DoxyCodeLine{538                             start = r;}
\DoxyCodeLine{539                         current = r;}
\DoxyCodeLine{540                     \}}
\DoxyCodeLine{541                     step = 1;}
\DoxyCodeLine{542                     \textcolor{keywordflow}{break};}
\DoxyCodeLine{543 }
\DoxyCodeLine{544                 \textcolor{keywordflow}{default}:}
\DoxyCodeLine{545                     \mbox{\hyperlink{group___r_a_p_i_d_j_s_o_n___c_o_n_f_i_g_gabeba18d612187bad2ac62aed9276d47c}{RAPIDJSON\_ASSERT}}(step == 2);}
\DoxyCodeLine{546                     GetRange(current).end = codepoint;}
\DoxyCodeLine{547                     step = 0;}
\DoxyCodeLine{548                 \}}
\DoxyCodeLine{549             \}}
\DoxyCodeLine{550         \}}
\DoxyCodeLine{551         \textcolor{keywordflow}{return} \textcolor{keyword}{false};}
\DoxyCodeLine{552     \}}
\DoxyCodeLine{553     }
\DoxyCodeLine{554     \mbox{\hyperlink{rapidjson_8h_a5ed6e6e67250fadbd041127e6386dcb5}{SizeType}} NewRange(\textcolor{keywordtype}{unsigned} codepoint) \{}
\DoxyCodeLine{555         Range* r = ranges\_.template Push<Range>();}
\DoxyCodeLine{556         r-\/>start = r-\/>end = codepoint;}
\DoxyCodeLine{557         r-\/>next = kRegexInvalidRange;}
\DoxyCodeLine{558         \textcolor{keywordflow}{return} rangeCount\_++;}
\DoxyCodeLine{559     \}}
\DoxyCodeLine{560 }
\DoxyCodeLine{561     \textcolor{keyword}{template} <\textcolor{keyword}{typename} InputStream>}
\DoxyCodeLine{562     \textcolor{keywordtype}{bool} CharacterEscape(DecodedStream<InputStream, Encoding>\& ds, \textcolor{keywordtype}{unsigned}* escapedCodepoint) \{}
\DoxyCodeLine{563         \textcolor{keywordtype}{unsigned} codepoint;}
\DoxyCodeLine{564         \textcolor{keywordflow}{switch} (codepoint = ds.Take()) \{}
\DoxyCodeLine{565             \textcolor{keywordflow}{case} \textcolor{charliteral}{'\string^'}:}
\DoxyCodeLine{566             \textcolor{keywordflow}{case} \textcolor{charliteral}{'\$'}:}
\DoxyCodeLine{567             \textcolor{keywordflow}{case} \textcolor{charliteral}{'|'}:}
\DoxyCodeLine{568             \textcolor{keywordflow}{case} \textcolor{charliteral}{'('}:}
\DoxyCodeLine{569             \textcolor{keywordflow}{case} \textcolor{charliteral}{')'}:}
\DoxyCodeLine{570             \textcolor{keywordflow}{case} \textcolor{charliteral}{'?'}:}
\DoxyCodeLine{571             \textcolor{keywordflow}{case} \textcolor{charliteral}{'*'}:}
\DoxyCodeLine{572             \textcolor{keywordflow}{case} \textcolor{charliteral}{'+'}:}
\DoxyCodeLine{573             \textcolor{keywordflow}{case} \textcolor{charliteral}{'.'}:}
\DoxyCodeLine{574             \textcolor{keywordflow}{case} \textcolor{charliteral}{'['}:}
\DoxyCodeLine{575             \textcolor{keywordflow}{case} \textcolor{charliteral}{']'}:}
\DoxyCodeLine{576             \textcolor{keywordflow}{case} \textcolor{charliteral}{'\{'}:}
\DoxyCodeLine{577             \textcolor{keywordflow}{case} \textcolor{charliteral}{'\}'}:}
\DoxyCodeLine{578             \textcolor{keywordflow}{case} \textcolor{charliteral}{'\(\backslash\)\(\backslash\)'}:}
\DoxyCodeLine{579                 *escapedCodepoint = codepoint; \textcolor{keywordflow}{return} \textcolor{keyword}{true};}
\DoxyCodeLine{580             \textcolor{keywordflow}{case} \textcolor{charliteral}{'f'}: *escapedCodepoint = 0x000C; \textcolor{keywordflow}{return} \textcolor{keyword}{true};}
\DoxyCodeLine{581             \textcolor{keywordflow}{case} \textcolor{charliteral}{'n'}: *escapedCodepoint = 0x000A; \textcolor{keywordflow}{return} \textcolor{keyword}{true};}
\DoxyCodeLine{582             \textcolor{keywordflow}{case} \textcolor{charliteral}{'r'}: *escapedCodepoint = 0x000D; \textcolor{keywordflow}{return} \textcolor{keyword}{true};}
\DoxyCodeLine{583             \textcolor{keywordflow}{case} \textcolor{charliteral}{'t'}: *escapedCodepoint = 0x0009; \textcolor{keywordflow}{return} \textcolor{keyword}{true};}
\DoxyCodeLine{584             \textcolor{keywordflow}{case} \textcolor{charliteral}{'v'}: *escapedCodepoint = 0x000B; \textcolor{keywordflow}{return} \textcolor{keyword}{true};}
\DoxyCodeLine{585             \textcolor{keywordflow}{default}:}
\DoxyCodeLine{586                 \textcolor{keywordflow}{return} \textcolor{keyword}{false}; \textcolor{comment}{// Unsupported escape character}}
\DoxyCodeLine{587         \}}
\DoxyCodeLine{588     \}}
\DoxyCodeLine{589 }
\DoxyCodeLine{590     \mbox{\hyperlink{classrapidjson_1_1_allocator}{Allocator}}* ownAllocator\_;}
\DoxyCodeLine{591     \mbox{\hyperlink{classrapidjson_1_1_allocator}{Allocator}}* allocator\_;}
\DoxyCodeLine{592     Stack<Allocator> states\_;}
\DoxyCodeLine{593     Stack<Allocator> ranges\_;}
\DoxyCodeLine{594     \mbox{\hyperlink{rapidjson_8h_a5ed6e6e67250fadbd041127e6386dcb5}{SizeType}} root\_;}
\DoxyCodeLine{595     \mbox{\hyperlink{rapidjson_8h_a5ed6e6e67250fadbd041127e6386dcb5}{SizeType}} stateCount\_;}
\DoxyCodeLine{596     \mbox{\hyperlink{rapidjson_8h_a5ed6e6e67250fadbd041127e6386dcb5}{SizeType}} rangeCount\_;}
\DoxyCodeLine{597 }
\DoxyCodeLine{598     \textcolor{keyword}{static} \textcolor{keyword}{const} \textcolor{keywordtype}{unsigned} kInfinityQuantifier = \string~0u;}
\DoxyCodeLine{599 }
\DoxyCodeLine{600     \textcolor{comment}{// For SearchWithAnchoring()}}
\DoxyCodeLine{601     \textcolor{keywordtype}{bool} anchorBegin\_;}
\DoxyCodeLine{602     \textcolor{keywordtype}{bool} anchorEnd\_;}
\DoxyCodeLine{603 \};}
\DoxyCodeLine{604 }
\DoxyCodeLine{605 \textcolor{keyword}{template} <\textcolor{keyword}{typename} RegexType, \textcolor{keyword}{typename} Allocator = CrtAllocator>}
\DoxyCodeLine{606 \textcolor{keyword}{class }\mbox{\hyperlink{classinternal_1_1_generic_regex_search}{GenericRegexSearch}} \{}
\DoxyCodeLine{607 \textcolor{keyword}{public}:}
\DoxyCodeLine{608     \textcolor{keyword}{typedef} \textcolor{keyword}{typename} RegexType::EncodingType \mbox{\hyperlink{classinternal_1_1_generic_regex_search_a7b1f81c580c33200c83e1529c2fdbf54}{Encoding}};}
\DoxyCodeLine{609     \textcolor{keyword}{typedef} \textcolor{keyword}{typename} Encoding::Ch \mbox{\hyperlink{classinternal_1_1_generic_regex_search_a966f3a62fc838b5e9350f4c6a624d9a1}{Ch}};}
\DoxyCodeLine{610 }
\DoxyCodeLine{611     \mbox{\hyperlink{classinternal_1_1_generic_regex_search_a72f70e210a4bc944dba62655a008750b}{GenericRegexSearch}}(\textcolor{keyword}{const} RegexType\& regex, \mbox{\hyperlink{classrapidjson_1_1_allocator}{Allocator}}* allocator = 0) : }
\DoxyCodeLine{612         regex\_(regex), allocator\_(allocator), ownAllocator\_(0),}
\DoxyCodeLine{613         state0\_(allocator, 0), state1\_(allocator, 0), stateSet\_()}
\DoxyCodeLine{614     \{}
\DoxyCodeLine{615         \mbox{\hyperlink{group___r_a_p_i_d_j_s_o_n___c_o_n_f_i_g_gabeba18d612187bad2ac62aed9276d47c}{RAPIDJSON\_ASSERT}}(regex\_.IsValid());}
\DoxyCodeLine{616         \textcolor{keywordflow}{if} (!allocator\_)}
\DoxyCodeLine{617             ownAllocator\_ = allocator\_ = \mbox{\hyperlink{rapidjson_8h_abdc7cd7902748ffe6626d71c59a73c3b}{RAPIDJSON\_NEW}}(\mbox{\hyperlink{classrapidjson_1_1_allocator}{Allocator}})();}
\DoxyCodeLine{618         stateSet\_ = \textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{unsigned}*\textcolor{keyword}{>}(allocator\_-\/>Malloc(GetStateSetSize()));}
\DoxyCodeLine{619         state0\_.template Reserve<SizeType>(regex\_.stateCount\_);}
\DoxyCodeLine{620         state1\_.template Reserve<SizeType>(regex\_.stateCount\_);}
\DoxyCodeLine{621     \}}
\DoxyCodeLine{622 }
\DoxyCodeLine{623     \mbox{\hyperlink{classinternal_1_1_generic_regex_search_ad14ee51edf6f9bfe3b7cffa59c4c19c9}{\string~GenericRegexSearch}}() \{}
\DoxyCodeLine{624         \mbox{\hyperlink{allocators_8h_a471c182d62d396b7d5d564e8d6a62d9e}{Allocator::Free}}(stateSet\_);}
\DoxyCodeLine{625         \mbox{\hyperlink{rapidjson_8h_a52c941c3fdd646527cdcd42aa846a28a}{RAPIDJSON\_DELETE}}(ownAllocator\_);}
\DoxyCodeLine{626     \}}
\DoxyCodeLine{627 }
\DoxyCodeLine{628     \textcolor{keyword}{template} <\textcolor{keyword}{typename} InputStream>}
\DoxyCodeLine{629     \textcolor{keywordtype}{bool} \mbox{\hyperlink{classinternal_1_1_generic_regex_search_ad204164a20e3ac403b405683b51c2d0b}{Match}}(InputStream\& is) \{}
\DoxyCodeLine{630         \textcolor{keywordflow}{return} SearchWithAnchoring(is, \textcolor{keyword}{true}, \textcolor{keyword}{true});}
\DoxyCodeLine{631     \}}
\DoxyCodeLine{632 }
\DoxyCodeLine{633     \textcolor{keywordtype}{bool} \mbox{\hyperlink{classinternal_1_1_generic_regex_search_a9d3fe83905549d2fd4c513b8eacd14de}{Match}}(\textcolor{keyword}{const} \mbox{\hyperlink{classinternal_1_1_generic_regex_search_a966f3a62fc838b5e9350f4c6a624d9a1}{Ch}}* s) \{}
\DoxyCodeLine{634         \mbox{\hyperlink{struct_generic_string_stream}{GenericStringStream<Encoding>}} is(s);}
\DoxyCodeLine{635         \textcolor{keywordflow}{return} \mbox{\hyperlink{classinternal_1_1_generic_regex_search_ad204164a20e3ac403b405683b51c2d0b}{Match}}(is);}
\DoxyCodeLine{636     \}}
\DoxyCodeLine{637 }
\DoxyCodeLine{638     \textcolor{keyword}{template} <\textcolor{keyword}{typename} InputStream>}
\DoxyCodeLine{639     \textcolor{keywordtype}{bool} \mbox{\hyperlink{classinternal_1_1_generic_regex_search_a766c684321471b468ff468648f186cf0}{Search}}(InputStream\& is) \{}
\DoxyCodeLine{640         \textcolor{keywordflow}{return} SearchWithAnchoring(is, regex\_.anchorBegin\_, regex\_.anchorEnd\_);}
\DoxyCodeLine{641     \}}
\DoxyCodeLine{642 }
\DoxyCodeLine{643     \textcolor{keywordtype}{bool} \mbox{\hyperlink{classinternal_1_1_generic_regex_search_a97398161c60f3ed3e4aabaff952c6f1e}{Search}}(\textcolor{keyword}{const} \mbox{\hyperlink{classinternal_1_1_generic_regex_search_a966f3a62fc838b5e9350f4c6a624d9a1}{Ch}}* s) \{}
\DoxyCodeLine{644         \mbox{\hyperlink{struct_generic_string_stream}{GenericStringStream<Encoding>}} is(s);}
\DoxyCodeLine{645         \textcolor{keywordflow}{return} \mbox{\hyperlink{classinternal_1_1_generic_regex_search_a766c684321471b468ff468648f186cf0}{Search}}(is);}
\DoxyCodeLine{646     \}}
\DoxyCodeLine{647 }
\DoxyCodeLine{648 \textcolor{keyword}{private}:}
\DoxyCodeLine{649     \textcolor{keyword}{typedef} \textcolor{keyword}{typename} RegexType::State State;}
\DoxyCodeLine{650     \textcolor{keyword}{typedef} \textcolor{keyword}{typename} RegexType::Range Range;}
\DoxyCodeLine{651 }
\DoxyCodeLine{652     \textcolor{keyword}{template} <\textcolor{keyword}{typename} InputStream>}
\DoxyCodeLine{653     \textcolor{keywordtype}{bool} SearchWithAnchoring(InputStream\& is, \textcolor{keywordtype}{bool} anchorBegin, \textcolor{keywordtype}{bool} anchorEnd) \{}
\DoxyCodeLine{654         \mbox{\hyperlink{classinternal_1_1_decoded_stream}{DecodedStream<InputStream, Encoding>}} ds(is);}
\DoxyCodeLine{655 }
\DoxyCodeLine{656         state0\_.Clear();}
\DoxyCodeLine{657         \mbox{\hyperlink{classinternal_1_1_stack}{Stack<Allocator>}} *current = \&state0\_, *next = \&state1\_;}
\DoxyCodeLine{658         \textcolor{keyword}{const} \textcolor{keywordtype}{size\_t} stateSetSize = GetStateSetSize();}
\DoxyCodeLine{659         std::memset(stateSet\_, 0, stateSetSize);}
\DoxyCodeLine{660 }
\DoxyCodeLine{661         \textcolor{keywordtype}{bool} matched = AddState(*current, regex\_.root\_);}
\DoxyCodeLine{662         \textcolor{keywordtype}{unsigned} codepoint;}
\DoxyCodeLine{663         \textcolor{keywordflow}{while} (!current-\/>\mbox{\hyperlink{classinternal_1_1_stack_a2b8bda380e33838a99e3c73ff9785f03}{Empty}}() \&\& (codepoint = ds.Take()) != 0) \{}
\DoxyCodeLine{664             std::memset(stateSet\_, 0, stateSetSize);}
\DoxyCodeLine{665             next-\/>Clear();}
\DoxyCodeLine{666             matched = \textcolor{keyword}{false};}
\DoxyCodeLine{667             \textcolor{keywordflow}{for} (\textcolor{keyword}{const} \mbox{\hyperlink{rapidjson_8h_a5ed6e6e67250fadbd041127e6386dcb5}{SizeType}}* s = current-\/>template Bottom<SizeType>(); s != current-\/>template End<SizeType>(); ++s) \{}
\DoxyCodeLine{668                 \textcolor{keyword}{const} State\& sr = regex\_.GetState(*s);}
\DoxyCodeLine{669                 \textcolor{keywordflow}{if} (sr.codepoint == codepoint ||}
\DoxyCodeLine{670                     sr.codepoint == RegexType::kAnyCharacterClass || }
\DoxyCodeLine{671                     (sr.codepoint == RegexType::kRangeCharacterClass \&\& MatchRange(sr.rangeStart, codepoint)))}
\DoxyCodeLine{672                 \{}
\DoxyCodeLine{673                     matched = AddState(*next, sr.out) || matched;}
\DoxyCodeLine{674                     \textcolor{keywordflow}{if} (!anchorEnd \&\& matched)}
\DoxyCodeLine{675                         \textcolor{keywordflow}{return} \textcolor{keyword}{true};}
\DoxyCodeLine{676                 \}}
\DoxyCodeLine{677                 \textcolor{keywordflow}{if} (!anchorBegin)}
\DoxyCodeLine{678                     AddState(*next, regex\_.root\_);}
\DoxyCodeLine{679             \}}
\DoxyCodeLine{680             \mbox{\hyperlink{namespaceinternal_a72b2c71d36273b9691487f58c671ce04}{internal::Swap}}(current, next);}
\DoxyCodeLine{681         \}}
\DoxyCodeLine{682 }
\DoxyCodeLine{683         \textcolor{keywordflow}{return} matched;}
\DoxyCodeLine{684     \}}
\DoxyCodeLine{685 }
\DoxyCodeLine{686     \textcolor{keywordtype}{size\_t} GetStateSetSize()\textcolor{keyword}{ const }\{}
\DoxyCodeLine{687         \textcolor{keywordflow}{return} (regex\_.stateCount\_ + 31) / 32 * 4;}
\DoxyCodeLine{688     \}}
\DoxyCodeLine{689 }
\DoxyCodeLine{690     \textcolor{comment}{// Return whether the added states is a match state}}
\DoxyCodeLine{691     \textcolor{keywordtype}{bool} AddState(Stack<Allocator>\& l, \mbox{\hyperlink{rapidjson_8h_a5ed6e6e67250fadbd041127e6386dcb5}{SizeType}} index) \{}
\DoxyCodeLine{692         \mbox{\hyperlink{group___r_a_p_i_d_j_s_o_n___c_o_n_f_i_g_gabeba18d612187bad2ac62aed9276d47c}{RAPIDJSON\_ASSERT}}(index != kRegexInvalidState);}
\DoxyCodeLine{693 }
\DoxyCodeLine{694         \textcolor{keyword}{const} State\& s = regex\_.GetState(index);}
\DoxyCodeLine{695         \textcolor{keywordflow}{if} (s.out1 != kRegexInvalidState) \{ \textcolor{comment}{// Split}}
\DoxyCodeLine{696             \textcolor{keywordtype}{bool} matched = AddState(l, s.out);}
\DoxyCodeLine{697             \textcolor{keywordflow}{return} AddState(l, s.out1) || matched;}
\DoxyCodeLine{698         \}}
\DoxyCodeLine{699         \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (!(stateSet\_[index >> 5] \& (1u << (index \& 31)))) \{}
\DoxyCodeLine{700             stateSet\_[index >> 5] |= (1u << (index \& 31));}
\DoxyCodeLine{701             *l.template PushUnsafe<SizeType>() = index;}
\DoxyCodeLine{702         \}}
\DoxyCodeLine{703         \textcolor{keywordflow}{return} s.out == kRegexInvalidState; \textcolor{comment}{// by using PushUnsafe() above, we can ensure s is not validated due to reallocation.}}
\DoxyCodeLine{704     \}}
\DoxyCodeLine{705 }
\DoxyCodeLine{706     \textcolor{keywordtype}{bool} MatchRange(\mbox{\hyperlink{rapidjson_8h_a5ed6e6e67250fadbd041127e6386dcb5}{SizeType}} rangeIndex, \textcolor{keywordtype}{unsigned} codepoint)\textcolor{keyword}{ const }\{}
\DoxyCodeLine{707         \textcolor{keywordtype}{bool} yes = (regex\_.GetRange(rangeIndex).start \& RegexType::kRangeNegationFlag) == 0;}
\DoxyCodeLine{708         \textcolor{keywordflow}{while} (rangeIndex != kRegexInvalidRange) \{}
\DoxyCodeLine{709             \textcolor{keyword}{const} Range\& r = regex\_.GetRange(rangeIndex);}
\DoxyCodeLine{710             \textcolor{keywordflow}{if} (codepoint >= (r.start \& \string~RegexType::kRangeNegationFlag) \&\& codepoint <= r.end)}
\DoxyCodeLine{711                 \textcolor{keywordflow}{return} yes;}
\DoxyCodeLine{712             rangeIndex = r.next;}
\DoxyCodeLine{713         \}}
\DoxyCodeLine{714         \textcolor{keywordflow}{return} !yes;}
\DoxyCodeLine{715     \}}
\DoxyCodeLine{716 }
\DoxyCodeLine{717     \textcolor{keyword}{const} RegexType\& regex\_;}
\DoxyCodeLine{718     \mbox{\hyperlink{classrapidjson_1_1_allocator}{Allocator}}* allocator\_;}
\DoxyCodeLine{719     \mbox{\hyperlink{classrapidjson_1_1_allocator}{Allocator}}* ownAllocator\_;}
\DoxyCodeLine{720     Stack<Allocator> state0\_;}
\DoxyCodeLine{721     Stack<Allocator> state1\_;}
\DoxyCodeLine{722     \mbox{\hyperlink{stdint_8h_a435d1572bf3f880d55459d9805097f62}{uint32\_t}}* stateSet\_;}
\DoxyCodeLine{723 \};}
\DoxyCodeLine{724 }
\DoxyCodeLine{725 \textcolor{keyword}{typedef} \mbox{\hyperlink{classinternal_1_1_generic_regex}{GenericRegex<UTF8<>}} > \mbox{\hyperlink{namespaceinternal_ae7fc20c6ee680ae3ba16ae16b4bd5e16}{Regex}};}
\DoxyCodeLine{726 \textcolor{keyword}{typedef} \mbox{\hyperlink{classinternal_1_1_generic_regex_search}{GenericRegexSearch<Regex>}} \mbox{\hyperlink{namespaceinternal_a7101e324c2d06f1505ef7c7d4401392b}{RegexSearch}};}
\DoxyCodeLine{727 }
\DoxyCodeLine{728 \} \textcolor{comment}{// namespace internal}}
\DoxyCodeLine{729 \mbox{\hyperlink{group___r_a_p_i_d_j_s_o_n___c_o_n_f_i_g_gaf18f052a98b9f5df5448d39484b743c1}{RAPIDJSON\_NAMESPACE\_END}}}
\DoxyCodeLine{730 }
\DoxyCodeLine{731 \textcolor{preprocessor}{\#ifdef \_\_GNUC\_\_}}
\DoxyCodeLine{732 RAPIDJSON\_DIAG\_POP}
\DoxyCodeLine{733 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{734 }
\DoxyCodeLine{735 \textcolor{preprocessor}{\#if defined(\_\_clang\_\_) || defined(\_MSC\_VER)}}
\DoxyCodeLine{736 RAPIDJSON\_DIAG\_POP}
\DoxyCodeLine{737 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{738 }
\DoxyCodeLine{739 \textcolor{preprocessor}{\#endif }\textcolor{comment}{// RAPIDJSON\_INTERNAL\_REGEX\_H\_}}

\end{DoxyCode}
